# コーディング規約

## ドキュメント運用

- `.claude/tasks/<game>.md` は**要件（何を作るか）のみ**を記載する指示書。設計（どう作るか）は含めない
- 設計パターンは `.claude/rules/architecture.md` に集約する
- フィードバックによる要件変更時は、コード修正と同時に `.claude/tasks/<game>.md` も自動で最新化する
- **README.md は簡潔に保つ**（詳細は `.claude/rules/` 配下のドキュメントに委ねる）
  - 記載する: プロジェクト概要、収録ゲーム一覧（名前のみ）、Tech Stack（1行）、Setup コマンド、詳細ドキュメントへのリンク
  - 記載しない: 各ゲームの詳細仕様、ディレクトリ構成、設計パターン、スキル/エージェント一覧（すべて `.claude/rules/` や `CLAUDE.md` に既載）

## 実装スコープの制御

- **依頼された変更のみ実装する** — 無関係なリファクタリング・改善・コメント追加は行わない
- **スコープ外の問題を発見した場合は、修正せずに報告する** — 別 Issue として切り出すことを提案する
- **既存コードのスタイル変更は行わない** — 変更対象のファイル内であっても、依頼範囲外のフォーマット修正・変数名変更等は行わない
- **PR は小さく保つ** — 1 つの Issue/要望に対して 1 つの PR を原則とする
  - 目安: **変更行数 300 行以下、ファイル数 10 以下**
  - 例外: `/add-game` スキルによる新ゲーム追加（構造上 15+ ファイルになるため）
  - 超える場合は分割を提案する

## Git 運用

- **原則 Issue を作成してから PR を作成する**（`Closes #N` で紐付け）
  - 例外: 変更行数 10 行以下かつ 1 ファイルのみの軽微な変更は Issue なしで直接 PR 可
- **ファイルに変更を加える場合は、main ブランチで直接行わず、必ず `git pull` で main を最新化してから feature ブランチを作成して作業を開始する**
- **コミット・プッシュはユーザーの明示的な指示があるまで行わない**
- **ブランチ名はラベルに対応するプレフィックスを付ける**:
  - `enhancement` → `feature/` （例: `feature/add-poker-game`）
  - `bug` → `fix/` （例: `fix/score-calculation`）
  - `documentation` → `docs/` （例: `docs/shorten-readme`）

## デザイン要件（Apple 風デザインシステム準拠）

- **Glassmorphism UI**: 半透明・backdrop-blur 効果
- **グラデーション要素**: 8色テーマのカラーシステム（最低限に絞る）
- **マイクロインタラクション**: ホバー・クリック時のアニメーション
- **多層背景**: 3層構造の美しいグラデーション背景
- **レスポンシブデザイン**: モバイルファーストアプローチ
- **60fps アニメーション**: スムーズで意味のある動作
- **見やすい UI**: WCAG 基準を満たした見やすい文字・背景色のコントラスト
- **Apple Human Interface Guidelines** 準拠
- **Core Web Vitals** 最適化必須

## インフラ制約

- **データベース使用禁止**（localStorage 活用）

## コード

- **コード内のコメントはすべて日本語で記述する**
- **README.md は英語で記述する**（README.md 以外のドキュメント・指示書・ルールファイルは日本語）
- **ライトモードのみ対応** — ダークモードは非対応
- shadcn/ui コンポーネント: Button, Dialog, Badge（スタイル: "new-york"）
- Tailwind CSS 4.x 形式: `@import "tailwindcss"`, `@theme inline` ブロック
- パスエイリアス: `@/*` → `./src/*`
- テストファイルはソースと同階層に配置: `src/lib/__tests__/`, `src/components/__tests__/`
- Vitest 設定: jsdom 環境、globals 有効、`@testing-library/jest-dom` マッチャー（`src/test/setup.ts` で設定）
- ESLint: フラットコンフィグ（v9+）、`eslint-config-next/core-web-vitals` + `/typescript`

## 実装の流れ（固定プロセス）

1. 仕様を把握する
2. ESLint をセットアップする
3. 設計を行う
4. 実装する
5. テストを実装する
6. リファクタリングを行う
7. 全ての品質チェックがパスすることを確認する
8. README.md に仕様をまとめる
