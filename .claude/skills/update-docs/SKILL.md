---
name: update-docs
description: ソースコードの実態とドキュメント（README.md, CLAUDE.md, architecture.md）の整合性を検証し、差分があれば更新する。
---

# ドキュメント横展開スキル

ソースコードの実態をスキャンし、3つのドキュメントファイルとの整合性を検証・更新する。

## 対象ドキュメント

1. `README.md`
2. `CLAUDE.md`
3. `.claude/rules/architecture.md`

## 実行プロセス

### Step 1: ソースコードの実態をスキャンする

以下を調査し、プロジェクトの現状を把握する:

1. **ゲーム一覧**: `src/app/*/page.tsx` を Glob で取得し、収録ゲームのルーティング一覧を確認する
2. **コンポーネント構成**: `src/components/*/` のディレクトリとファイルを確認する
3. **型・ライブラリ・フック**: `src/types/*.ts`, `src/lib/*.ts`, `src/hooks/*.ts` の実ファイルを確認する
4. **スキル一覧**: `.claude/skills/*/SKILL.md` を Glob で取得し、各スキルの `name` と `description` を読み取る
5. **エージェント一覧**: `.claude/agents/*.md` を Glob で取得する
6. **ホーム画面登録**: `src/components/home/game-list.tsx` の `games` 配列を読み取る

### Step 2: 各ドキュメントとの差分を検出する

Step 1 で把握した実態と、各ドキュメントの記載内容を比較する。以下のセクションを重点的にチェックする:

#### README.md
- 「収録ゲーム」セクション — ゲームの過不足
- 「Claude Code スキル」テーブル — スキルの過不足
- 「Claude Code エージェント」テーブル — エージェントの過不足
- 「プロジェクト構成」ツリー — ファイル・ディレクトリの過不足

#### CLAUDE.md
- 「スキル」セクション — スキルの過不足
- 「エージェント」セクション — エージェントの過不足

#### .claude/rules/architecture.md
- 「ルーティング」セクション — ルートの過不足
- 「収録ゲーム」セクション — ゲームの過不足・コンポーネントツリーの正確性
- 「スキル」テーブル — スキルの過不足
- 「エージェント」テーブル — エージェントの過不足

### Step 3: 差分の報告と更新

1. 検出した差分を一覧でユーザーに報告する
2. 差分がない場合は「すべてのドキュメントは最新です」と報告して終了する
3. 差分がある場合は、各ドキュメントを更新する

### Step 4: 更新結果の報告

更新したファイルと変更内容をまとめて報告する。

## 注意事項

- このスキルは**ドキュメントの更新のみ**を行う。ソースコードの変更は行わない
- 既存のドキュメントの文体・フォーマットを維持する
- ゲームの説明文や機能詳細は `.claude/tasks/<game>.md` やソースコードから読み取る
